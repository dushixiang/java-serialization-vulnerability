package cn.typesafe.jsv.util;

import java.io.*;

/**
 * 序列化工具
 */
public class Serializer {

    /**
     * 将对象序列化为字节数组
     * @param obj 对象
     * @return 字节数组
     * @throws IOException IO异常
     */
    public static byte[] serialize(final Object obj) throws IOException {
        final ByteArrayOutputStream out = new ByteArrayOutputStream();
        try (ObjectOutputStream objOut = new ObjectOutputStream(out)) {
            objOut.writeObject(obj);
            objOut.flush();
        }
        return out.toByteArray();
    }

    /**
     * 将字节数组反序列化对象
     * @param bytes 字节数组
     * @return 对象
     * @throws IOException IO异常
     * @throws ClassNotFoundException 类找不到异常
     */
    public static Object deserialize(byte[] bytes) throws IOException, ClassNotFoundException {
        try (ObjectInputStream input = new ObjectInputStream(new ByteArrayInputStream(bytes))) {
            return input.readObject();
        }
    }
}
